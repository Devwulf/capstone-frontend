(this["webpackJsonpcapstone-frontend"]=this["webpackJsonpcapstone-frontend"]||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var r=n(2),s=n.n(r),a=n(44),c=n.n(a),i=(n(51),n(52),n(53),n(54),n(1)),o=n.n(i),l=n(3),u=n(5),d=n(6),h=n(4),b=n(8),p=n(7),f=n(10),x=n.n(f),m=n(110),j=n(13),v=n.n(j),O=function e(){Object(u.a)(this,e)};O.localBaseUrl="http://localhost:5000",O.serverBaseUrl="https://www.devwulfcodes.com";var T,y=n(45);!function(e){e[e.Blue=0]="Blue",e[e.Red=1]="Red"}(T||(T={}));var g=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{policies:[]};Object(u.a)(this,e),this.baseUrl=void 0,this.policies=void 0,this.baseUrl=t,this.policies=n}return Object(d.a)(e,[{key:"retrieveBestPolicies",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r,s,a,c,i=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:T.Blue,r=i.length>2&&void 0!==i[2]?i[2]:0,s=i.length>3&&void 0!==i[3]?i[3]:"bKills",a=[],c="".concat(this.baseUrl,"/api/policy/best?team=").concat(T[n],"&state=").concat(r,"&actions=").concat(s),e.next=7,x.a.get(c,{headers:{"X-Access-Tokens":t}});case 7:e.sent.data.policies.forEach((function(e){a.push(e)})),this.policies.policies=a;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"retrieveNextPolicies",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r,s,a,c,i=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:T.Blue,r=i.length>2&&void 0!==i[2]?i[2]:0,s=i.length>3&&void 0!==i[3]?i[3]:"bKills",a=[],c="".concat(this.baseUrl,"/api/policy/next?team=").concat(T[n],"&state=").concat(r,"&action=").concat(s),e.next=7,x.a.get(c,{headers:{"X-Access-Tokens":t}});case 7:e.sent.data.policies.forEach((function(e){a.push(e)})),this.policies.policies=a;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"retrieveStartPolicies",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r,s,a=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:T.Blue,r=[],s="".concat(this.baseUrl,"/api/policy/start?team=").concat(T[n]),e.next=5,x.a.get(s,{headers:{"X-Access-Tokens":t}});case 5:e.sent.data.policies.forEach((function(e){r.push(e)})),this.policies.policies=r;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addPolicy",value:function(e){this.policies.policies.push(e)}},{key:"clearPolicies",value:function(){this.policies.policies=[]}},{key:"getSchema",value:function(){return this.policies}}]),e}(),k=s.a.createContext({team:T.Blue,setTeam:function(e){},addListener:function(e,t){},removeListener:function(e){}}),N=s.a.createContext({choosePolicy:function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),R=s.a.createContext({setAccuracy:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addListener:function(e,t){},removeListener:function(e){}}),w=s.a.createContext({searchStr:"",setSearchStr:function(e){},searchAction:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addActionListener:function(e,t){},removeActionListener:function(e){}}),C=s.a.createContext({token:"",setToken:function(e){}}),E=s.a.createContext({baseUrl:"",setBaseUrl:function(e){},addListener:function(e,t){},removeListener:function(e){}}),U=s.a.createContext({cookies:new y.a}),L=s.a.createContext({currentTooltip:0,isTooltipEnabled:!0,setCurrentTooltip:function(e){},resetCurrentTooltip:function(){},setTooltipEnabled:function(e){}}),_=n(0),B=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={},r}return Object(d.a)(n,[{key:"render",value:function(){return Object(_.jsx)(E.Consumer,{children:function(e){var t=e.baseUrl,n=e.setBaseUrl;return Object(_.jsx)("div",{className:"flex items-center",children:Object(_.jsxs)("label",{htmlFor:"",className:"flex items-center",children:[Object(_.jsx)("span",{className:"text-sm font-bold mr-2 text-gray-900",children:"Local"}),Object(_.jsx)(v.a,{className:"mr-2",icons:!1,checked:t===O.serverBaseUrl,onChange:function(e){var t=e.target.checked?O.serverBaseUrl:O.localBaseUrl;n(t)}}),Object(_.jsx)("span",{className:"text-sm font-bold text-gray-900",children:"Server"})]})})}})}}]),n}(s.a.Component),A=n(22),I=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={},r}return Object(d.a)(n,[{key:"render",value:function(){var e,t,n=this.props,r=n.order,s=n.text,a=n.position,c=n.positionOffsetX,i=void 0===c?0:c,o=n.positionOffsetY,l=void 0===o?0:o,u=n.targetSizeY,d=void 0===u?0:u,h=n.hasPrev,b=void 0!==h&&h,p=n.hasNext,f=void 0!==p&&p,x=n.hasClose,m=void 0!==x&&x,j=n.isClose,v=void 0!==j&&j;switch(a){case"top":t={bottom:"calc(100% + 0.75rem + ".concat(l,"rem)")},e={left:"".concat(0!==i?i+"rem":""),bottom:t.bottom};break;case"bottom":t={top:"calc(100% + 0.75rem + ".concat(l,"rem)")},e={left:"".concat(0!==i?i+"rem":""),top:t.top};break;case"left":t={top:"".concat(d/2,"px"),right:"calc(100% + 0.75rem + ".concat(i,"rem)")},e={top:"".concat(0!==l?l+"rem":""),right:t.right};break;default:t={top:"".concat(d/2,"px"),left:"calc(100% + 0.75rem + ".concat(i,"rem)")},e={top:"".concat(0!==l?l+"rem":""),left:t.left}}return Object(_.jsx)(L.Consumer,{children:function(n){var c=n.currentTooltip,i=n.isTooltipEnabled,o=n.setCurrentTooltip,l=n.setTooltipEnabled;return i&&c===r?Object(_.jsxs)("div",{className:"relative w-full flex items-center justify-center z-50",style:{bottom:"100%"},children:[Object(_.jsxs)("div",{className:"absolute flex flex-col p-2 text-sm rounded-default w-64 bg-gray-800 text-gray-100",style:Object(A.a)({},e),children:[Object(_.jsx)("span",{className:"mb-2",children:s}),Object(_.jsxs)("div",{className:"flex justify-between",children:[Object(_.jsx)("div",{className:"",children:Object(_.jsx)("button",{className:"px-2 py-1 rounded-default bg-gray-600",hidden:!b||r<=0,onClick:function(){return o(r-1)},children:"Prev"})}),Object(_.jsxs)("div",{className:"",children:[Object(_.jsx)("button",{className:"px-2 py-1 mr-1 rounded-default bg-blue-500",hidden:!f,onClick:function(){return o(r+1)},children:"Next"}),Object(_.jsx)("button",{className:"px-2 py-1 rounded-default bg-red-500",hidden:!m,onClick:function(){return l(!1)},children:v?"Close":"Skip"})]})]})]}),Object(_.jsx)("div",{className:"tooltip-".concat(a," absolute flex flex-col w-full h-full"),style:Object(A.a)({},t)})]}):null}})}}]),n}(s.a.Component),S=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={username:"",password:"",isRegister:!1},r.onDemoClick=r.onDemoClick.bind(Object(h.a)(r)),r.onRegister=r.onRegister.bind(Object(h.a)(r)),r.onLogin=r.onLogin.bind(Object(h.a)(r)),r}return Object(d.a)(n,[{key:"onDemoClick",value:function(){this.setState({username:"test",password:"test123"})}},{key:"onRegister",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,r,s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.baseUrlContext,n=this.state,r=n.username,s=n.password,e.prev=2,e.next=5,x.a.post("".concat(t.baseUrl,"/auth/register"),{username:r,password:s});case 5:200===(a=e.sent).status&&alert(a.data.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert("".concat(e.t0.response.status,": ").concat(e.t0.response.data));case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"onLogin",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,r,s,a,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.authContext,r=t.baseUrlContext,s=this.state,a=s.username,c=s.password,e.prev=2,e.next=5,x.a.post("".concat(r.baseUrl,"/auth/login"),{},{auth:{username:a,password:c}});case 5:200===(i=e.sent).status&&n.setToken(i.data.token),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert("".concat(e.t0.response.status,": ").concat(e.t0.response.data));case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.username,r=t.password,s=t.isRegister;return Object(_.jsx)("div",{className:"flex justify-center items-center w-screen h-screen",children:!s&&Object(_.jsxs)("div",{className:"flex flex-col p-4 rounded-lg bg-indigo-200 text-indigo-900",children:[Object(_.jsxs)("div",{className:"flex flex-row justify-between items-center mb-4",children:[Object(_.jsx)("span",{className:"text-2xl font-bold",children:"Login"}),Object(_.jsxs)("div",{className:"",children:[Object(_.jsx)(B,{}),Object(_.jsx)(I,{order:0,text:"This is for choosing whether to use your own local backend server or a premade server for login.",position:"top",positionOffsetY:1.5,hasNext:!0,hasClose:!0})]})]}),Object(_.jsxs)("div",{className:"flex flex-col mb-2",children:[Object(_.jsx)("label",{className:"text-xs mb-1",htmlFor:"",children:"Username"}),Object(_.jsx)("input",{className:"px-2 py-1 rounded-default text-sm",value:n,onChange:function(t){return e.setState({username:t.target.value})}})]}),Object(_.jsxs)("div",{className:"flex flex-col mb-4",children:[Object(_.jsx)("label",{className:"text-xs mb-1",htmlFor:"",children:"Password"}),Object(_.jsx)("input",{className:"px-2 py-1 rounded-default text-sm",value:r,type:"password",onChange:function(t){return e.setState({password:t.target.value})}})]}),Object(_.jsxs)("div",{className:"flex justify-between",children:[Object(_.jsx)("button",{className:"px-4 py-1 mr-2 rounded-default text-xs bg-indigo-400 text-indigo-100",onClick:function(){return e.setState({isRegister:!0})},children:"Register"}),Object(_.jsx)("button",{className:"px-4 py-1 mr-2 rounded-default text-xs bg-indigo-700 text-indigo-200",onClick:this.onLogin,children:"Login"}),Object(_.jsxs)("div",{className:"",children:[Object(_.jsx)("button",{className:"px-4 py-1 rounded-default text-xs bg-indigo-400 text-indigo-100",onClick:this.onDemoClick,children:"Demo"}),Object(_.jsx)(I,{order:1,text:"This button fills in the login details for demo. Try it out!",position:"right",positionOffsetY:-1.5,targetSizeY:26,hasClose:!0,hasPrev:!0,hasNext:!0})]})]})]})||s&&Object(_.jsxs)("div",{className:"flex flex-col p-4 rounded-lg bg-indigo-200 text-indigo-900",children:[Object(_.jsxs)("div",{className:"flex flex-row justify-between items-center mb-4",children:[Object(_.jsx)("span",{className:"text-2xl font-bold",children:"Register"}),Object(_.jsx)(B,{})]}),Object(_.jsxs)("div",{className:"flex flex-col mb-2",children:[Object(_.jsx)("label",{className:"text-xs mb-1",htmlFor:"",children:"Username"}),Object(_.jsx)("input",{className:"px-2 py-1 rounded-default text-sm",value:n,onChange:function(t){return e.setState({username:t.target.value})}})]}),Object(_.jsxs)("div",{className:"flex flex-col mb-4",children:[Object(_.jsx)("label",{className:"text-xs mb-1",htmlFor:"",children:"Password"}),Object(_.jsx)("input",{className:"px-2 py-1 rounded-default text-sm",value:r,type:"password",onChange:function(t){return e.setState({password:t.target.value})}})]}),Object(_.jsxs)("div",{className:"flex justify-between",children:[Object(_.jsx)("button",{className:"px-4 py-1 mr-2 rounded-default text-xs bg-indigo-700 text-indigo-200",onClick:this.onRegister,children:"Register"}),Object(_.jsx)("button",{className:"px-4 py-1 mr-2 rounded-default text-xs bg-indigo-400 text-indigo-100",onClick:function(){return e.setState({isRegister:!1})},children:"Login"}),Object(_.jsx)("button",{className:"px-4 py-1 rounded-default text-xs bg-indigo-400 text-indigo-100",onClick:this.onDemoClick,children:"Demo"})]})]})})}}]),n}(s.a.Component);function P(){var e=Object(r.useContext)(C),t=Object(r.useContext)(E);return Object(_.jsx)(S,{authContext:e,baseUrlContext:t})}var D=n(21),H=n(14),M=n.n(H);function V(e,t){return F.apply(this,arguments)}function F(){return(F=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return n.setState(t,(function(){return e(null)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W,G=n(17),Y=n.n(G);!function(e){e[e.bKills=0]="bKills",e[e.bTOP_OUTER_TURRET=1]="bTOP_OUTER_TURRET",e[e.bTOP_INNER_TURRET=2]="bTOP_INNER_TURRET",e[e.bTOP_BASE_TURRET=3]="bTOP_BASE_TURRET",e[e.bTOP_INHIBITOR=4]="bTOP_INHIBITOR",e[e.bMID_OUTER_TURRET=5]="bMID_OUTER_TURRET",e[e.bMID_INNER_TURRET=6]="bMID_INNER_TURRET",e[e.bMID_BASE_TURRET=7]="bMID_BASE_TURRET",e[e.bMID_INHIBITOR=8]="bMID_INHIBITOR",e[e.bMID_NEXUS_TURRET=9]="bMID_NEXUS_TURRET",e[e.bBOT_OUTER_TURRET=10]="bBOT_OUTER_TURRET",e[e.bBOT_INNER_TURRET=11]="bBOT_INNER_TURRET",e[e.bBOT_BASE_TURRET=12]="bBOT_BASE_TURRET",e[e.bBOT_INHIBITOR=13]="bBOT_INHIBITOR",e[e.bDRAGON=14]="bDRAGON",e[e.bELDER_DRAGON=15]="bELDER_DRAGON",e[e.bRIFT_HERALD=16]="bRIFT_HERALD",e[e.bBARON_NASHOR=17]="bBARON_NASHOR",e[e.bWon=18]="bWon",e[e.rKills=19]="rKills",e[e.rTOP_OUTER_TURRET=20]="rTOP_OUTER_TURRET",e[e.rTOP_INNER_TURRET=21]="rTOP_INNER_TURRET",e[e.rTOP_BASE_TURRET=22]="rTOP_BASE_TURRET",e[e.rTOP_INHIBITOR=23]="rTOP_INHIBITOR",e[e.rMID_OUTER_TURRET=24]="rMID_OUTER_TURRET",e[e.rMID_INNER_TURRET=25]="rMID_INNER_TURRET",e[e.rMID_BASE_TURRET=26]="rMID_BASE_TURRET",e[e.rMID_INHIBITOR=27]="rMID_INHIBITOR",e[e.rMID_NEXUS_TURRET=28]="rMID_NEXUS_TURRET",e[e.rBOT_OUTER_TURRET=29]="rBOT_OUTER_TURRET",e[e.rBOT_INNER_TURRET=30]="rBOT_INNER_TURRET",e[e.rBOT_BASE_TURRET=31]="rBOT_BASE_TURRET",e[e.rBOT_INHIBITOR=32]="rBOT_INHIBITOR",e[e.rDRAGON=33]="rDRAGON",e[e.rELDER_DRAGON=34]="rELDER_DRAGON",e[e.rRIFT_HERALD=35]="rRIFT_HERALD",e[e.rBARON_NASHOR=36]="rBARON_NASHOR",e[e.rWon=37]="rWon"}(W||(W={}));var X=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={},r}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.policy,n=e.isSelected,r=void 0!==n&&n,s=e.isDisabled,a=void 0!==s&&s,c=e.isBestProb,i=void 0!==c&&c,o=e.isBestQValue,l=void 0!==o&&o,u=e.showState,d=void 0!==u&&u,h=e.showAction,b=void 0!==h&&h,p=e.showProbability,f=void 0!==p&&p,x=e.showQValue,m=void 0!==x&&x,j=e.showGoldAdv,v=void 0!==j&&j,O=t.probability<0?"-":"".concat((100*t.probability).toFixed(2),"%"),y=t.qValue<0?"-":"".concat(t.qValue.toFixed(2)),g=""===t.goldAdv?"-":t.goldAdv;return Object(_.jsx)(k.Consumer,{children:function(e){var n=e.team;return Object(_.jsx)(N.Consumer,{children:function(e){var s=e.choosePolicy;return Object(_.jsxs)("button",{className:"flex flex-col items-center w-full ".concat(r?n===T.Blue?"bg-blue-600 text-blue-200":"bg-red-600 text-red-200":""," ").concat(a?"opacity-50 cursor-default":""),onClick:function(){return s(n,t)},disabled:a,children:[Object(_.jsx)("span",{className:"".concat(d?"":"hidden"),children:t.state}),Object(_.jsx)("span",{className:"".concat(b?"text-sm":"hidden"),children:t.action}),Object(_.jsxs)("div",{className:"flex flex-row",children:[Object(_.jsxs)("div",{className:"".concat(f?"flex flex-col mr-4":"hidden"," ").concat(i?"text-green-300 font-bold":""),children:[Object(_.jsx)("span",{className:"text-xs",children:"Probability"}),Object(_.jsx)("span",{className:"text-sm",children:O})]}),Object(_.jsxs)("div",{className:"".concat(m?"flex flex-col mr-4":"hidden"," ").concat(l?"text-green-300 font-bold":""),children:[Object(_.jsx)("span",{className:"text-xs",children:"Q-Value"}),Object(_.jsx)("span",{className:"text-sm",children:y})]}),Object(_.jsxs)("div",{className:"".concat(v?"flex flex-col":"hidden"),children:[Object(_.jsx)("span",{className:"text-xs",children:"Gold Adv"}),Object(_.jsx)("span",{className:"text-sm",children:g})]})]})]})}})}})}}]),n}(s.a.Component),z=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={},r}return Object(d.a)(n,[{key:"render",value:function(){var e,t,n=this.props,r=n.state,s=n.selectedAction,a=n.actions,c=void 0===a?[]:a,i=n.isDisabled,o=void 0!==i&&i,l=c;if(c.length<=0){for(var u in W)if(isNaN(Number(u))){var d=void 0!==s&&s.action===u?s:{state:r,action:u,probability:-1,qValue:-1,goldAdv:""};l.push(d)}}else e=c.reduce((function(e,t){return e.probability>t.probability?e:t})),t=c.reduce((function(e,t){return e.qValue>t.qValue?e:t}));return Object(_.jsx)(k.Consumer,{children:function(n){var a=n.team;return Object(_.jsxs)("div",{className:"flex flex-col w-64 h-full p-4",children:[Object(_.jsxs)("div",{className:"flex flex-col items-center justify-center mb-2 h-12 ".concat(a===T.Blue?"text-blue-900":"text-red-900"),children:[Object(_.jsx)("span",{className:"text-xs",style:{marginBottom:"-0.5rem"},children:"Action"}),Object(_.jsx)("span",{className:"text-2xl font-medium",children:r+1})]}),Object(_.jsx)("div",{className:"flex flex-col h-full py-4 border-2 shadow-lg rounded-lg bg-gray-100 ".concat(a===T.Blue?"border-blue-800":"border-red-800"),children:Object(_.jsx)(M.a,{autoHide:!0,autoHideTimeout:250,style:{width:"100%"},children:l.map((function(n,r){return Object(_.jsx)("div",{className:"".concat(r===l.length-1?"":"mb-2"),children:Object(_.jsx)(X,{policy:n,isSelected:void 0!==s&&(n.action===s.action||void 0!==e&&Y()(e,n)),isDisabled:o,isBestProb:void 0!==e&&Y()(e,n),isBestQValue:void 0!==t&&Y()(t,n),showAction:!0,showProbability:!0,showQValue:!0,showGoldAdv:!0})},r)}))})})]})}})}}]),n}(s.a.Component);z.contextType=N;var q=n.p+"static/media/logo.103b5fa1.svg",K=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var r;Object(u.a)(this,n),r=t.call(this,e);var s=e.baseUrlContext.baseUrl;return r.state={currentPolicies:new g(s),bestPolicies:new g(s),nextPolicies:new g(s),pastPolicies:[],isLoading:!0,correctCount:0},r.onTeamChanged=r.onTeamChanged.bind(Object(h.a)(r)),r.onBaseUrlChanged=r.onBaseUrlChanged.bind(Object(h.a)(r)),r.resetPolicies=r.resetPolicies.bind(Object(h.a)(r)),r.onChoosePolicy=r.onChoosePolicy.bind(Object(h.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.teamContext,r=t.baseUrlContext,n.addListener("policies",this.onTeamChanged),r.addListener("policies",this.onBaseUrlChanged),e.next=5,this.state.nextPolicies.retrieveStartPolicies(this.props.authContext.token);case 5:return e.next=7,V({isLoading:!1},this);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onTeamChanged",value:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.resetPolicies();case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBaseUrlChanged",value:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.resetPolicies();case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetPolicies",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V({isLoading:!0,pastPolicies:[]},this);case 2:return e.next=4,this.state.currentPolicies.clearPolicies();case 4:return e.next=6,this.state.bestPolicies.clearPolicies();case 6:return e.next=8,this.state.nextPolicies.retrieveStartPolicies(this.props.authContext.token);case 8:return e.next=10,this.props.accuracyContext.setAccuracy(0);case 10:return e.next=12,V({isLoading:!1},this);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onChoosePolicy",value:function(){var e=Object(l.a)(o.a.mark((function e(t,n){var r,s,a,c,i,l,u,d,h,b,p,f,x,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props,s=r.accuracyContext,a=r.authContext,c=this.state,i=c.pastPolicies,l=c.currentPolicies,u=c.bestPolicies,d=c.nextPolicies,h=c.correctCount,l.addPolicy(n),b=u.getSchema().policies,p=l.getSchema().policies,f=h,b.length>1&&n.action===b[1].action&&f++,p.length>1&&s.setAccuracy(f/(p.length-1)),x=i.concat({policies:d.getSchema().policies}),e.next=11,V({isLoading:!0,pastPolicies:x,correctCount:f},this);case 11:if(!((m=p.length-1)>=0)){e.next=17;break}return e.next=15,u.retrieveBestPolicies(a.token,t,m,n.action);case 15:return e.next=17,d.retrieveNextPolicies(a.token,t,m,n.action);case 17:return e.next=19,V({isLoading:!1},this);case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.teamContext,n=e.baseUrlContext;t.removeListener("policies"),n.removeListener("policies")}},{key:"render",value:function(){var e=this.state,t=e.pastPolicies,n=e.currentPolicies,r=e.bestPolicies,s=e.nextPolicies,a=e.isLoading,c=n.getSchema().policies,i=r.getSchema().policies,o=s.getSchema().policies,l=[];l.push.apply(l,Object(D.a)(c)),l.push.apply(l,Object(D.a)(i.slice(1)));var u=0;return o.length>0&&(u=o[0].state),Object(_.jsx)(N.Provider,{value:{choosePolicy:this.onChoosePolicy},children:Object(_.jsxs)("div",{className:"w-full h-full relative",children:[a&&Object(_.jsx)("div",{className:"absolute top-0 right-0 bottom-0 left-0 flex flex-col items-center justify-center backdrop-filter backdrop-blur-sm z-10",children:Object(_.jsxs)("div",{className:"p-4 bg-gray-800 rounded-md",children:[Object(_.jsx)("img",{src:q,alt:"logo",className:"App-logo"}),Object(_.jsx)("span",{className:"text-2xl text-blue-200",children:"Loading"})]})}),Object(_.jsx)(M.a,{autoHide:!0,autoHideTimeout:250,children:Object(_.jsx)("div",{className:"flex flex-row h-full",children:c.length<=0&&Object(_.jsx)(z,{state:0,actions:o})||c.length>0&&Object(_.jsx)(_.Fragment,{children:l.map((function(e,n){return Object(_.jsx)("div",{className:"",children:e.state===u&&Object(_.jsx)(z,{state:e.state,selectedAction:e,actions:o})||e.state!==u&&n<t.length&&Object(_.jsx)(z,{state:e.state,selectedAction:e,actions:t[n].policies,isDisabled:!0})||e.state!==u&&n>=t.length&&Object(_.jsx)(z,{state:e.state,selectedAction:e,isDisabled:!0})},n)}))})})})]})})}}]),n}(s.a.Component);function Q(){var e=Object(r.useContext)(k),t=Object(r.useContext)(R),n=Object(r.useContext)(C),s=Object(r.useContext)(E);return Object(_.jsx)(K,{teamContext:e,accuracyContext:t,authContext:n,baseUrlContext:s})}var Z=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={},r}return Object(d.a)(n,[{key:"render",value:function(){return Object(_.jsx)(k.Consumer,{children:function(e){var t=e.team;return Object(_.jsx)(w.Consumer,{children:function(e){var n=e.searchStr,r=e.setSearchStr,s=e.searchAction;return Object(_.jsxs)("div",{className:"flex w-full px-4 py-2 max-w-3xl h-12",children:[Object(_.jsx)("input",{className:"w-full mr-2 rounded-default shadow-inner px-2 text-sm",placeholder:"Type in Youtube link here...",value:n,onChange:function(e){return r(e.target.value)},onSubmit:function(){return s()}}),Object(_.jsx)("button",{className:"px-4 mr-2 rounded-default text-sm ".concat(t===T.Blue?"bg-blue-500 text-blue-200":"bg-red-500 bg- text-red-200"),onClick:function(){return s()},children:"Search"}),Object(_.jsx)("button",{className:"px-4 rounded-default text-sm ".concat(t===T.Blue?"bg-blue-500 text-blue-200":"bg-red-500 bg- text-red-200"),onClick:function(){return r("https://youtu.be/kTewx3x6Dps")},children:"Demo"})]})}})}})}}]),n}(s.a.Component),J=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={},r}return Object(d.a)(n,[{key:"render",value:function(){return Object(_.jsx)(k.Consumer,{children:function(e){var t=e.team,n=e.setTeam;return Object(_.jsx)("div",{className:"flex items-center",children:Object(_.jsxs)("label",{htmlFor:"",className:"flex items-center",children:[Object(_.jsx)("span",{className:"text-lg font-bold mr-2 ".concat(t===T.Blue?"text-blue-900":"text-red-900"),children:"Team"}),Object(_.jsx)(v.a,{icons:!1,onChange:function(e){var t=e.target.checked?T.Red:T.Blue;n(t)}})]})})}})}}]),n}(s.a.Component),$=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={accuracy:0},r.onAccuracyChanged=r.onAccuracyChanged.bind(Object(h.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.context.addListener("topBar",this.onAccuracyChanged)}},{key:"onAccuracyChanged",value:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({accuracy:t});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.context.removeListener("topBar")}},{key:"render",value:function(){this.state.accuracy;return Object(_.jsxs)("div",{className:"flex justify-between w-screen h-20 p-4",children:[Object(_.jsxs)("div",{className:"flex flex-row",children:[Object(_.jsxs)("div",{className:"flex flex-col justify-center mr-4",children:[Object(_.jsx)(J,{}),Object(_.jsx)(I,{order:0,text:"This is for toggling the team to track, between either Blue or Red team.",position:"bottom",positionOffsetX:1,positionOffsetY:3,hasPrev:!0,hasNext:!0,hasClose:!0})]}),Object(_.jsxs)("div",{className:"flex flex-col justify-center mr-4",children:[Object(_.jsx)(B,{}),Object(_.jsx)(I,{order:1,text:"This is for choosing whether to use your own local backend server or a premade server for the action queries.",position:"bottom",positionOffsetY:3,hasPrev:!0,hasNext:!0,hasClose:!0})]})]}),Object(_.jsxs)("div",{className:"w-full flex flex-col max-w-3xl items-center",children:[Object(_.jsx)(Z,{}),Object(_.jsx)(I,{order:2,text:"Type in the Youtube link to the match replay here. The following formats are accepted: https://youtu.be/kTewx3x6Dps or https://www.youtube.com/watch?v=kTewx3x6Dps",position:"bottom",positionOffsetY:3,hasPrev:!0,hasClose:!0})]}),Object(_.jsx)("div",{className:"flex flex-col items-end justify-center w-40"})]})}}]),n}(s.a.Component);$.contextType=R;var ee=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).WIDTH=840,r.state={embedId:"",isIdValid:!0},r.getEmbedId=r.getEmbedId.bind(Object(h.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.context.addActionListener("videoPlayer",this.getEmbedId)}},{key:"getEmbedId",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=/^(https:\/\/www.youtube.com\/watch\?v=[a-zA-Z0-9]{11})|(https:\/\/youtu.be\/[a-zA-Z0-9]{11})|([a-zA-Z0-9]{11})$/,r="",t.match(n)&&(r=t.substring(t.length-11)),r&&11===r.length){e.next=6;break}return this.setState({embedId:"",isIdValid:!1}),e.abrupt("return");case 6:this.setState({embedId:r,isIdValid:!0});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.context.removeActionListener("videoPlayer")}},{key:"render",value:function(){var e=this.state,t=e.embedId,n=e.isIdValid,r=this.WIDTH*(9/16);return Object(_.jsxs)("div",{className:"flex w-full justify-center relative",children:[Object(_.jsx)("div",{className:"absolute left-0 right-0 top-0 bottom-0 bg-gray-900 opacity-50"}),!t&&Object(_.jsx)("div",{className:"flex w-full justify-center z-10",children:Object(_.jsx)("div",{className:"flex items-center justify-center bg-gray-900",style:{width:this.WIDTH,height:r},children:Object(_.jsx)("span",{className:"text-gray-400",children:"".concat(n?"No video selected.":"Invalid video url or id given.")})})})||t&&Object(_.jsx)("div",{className:"z-10",children:Object(_.jsx)("iframe",{width:this.WIDTH,height:r,src:"https://www.youtube.com/embed/".concat(t),frameBorder:"0",allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Youtube"})})]})}}]),n}(s.a.Component);ee.contextType=w;var te=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).teamListeners=[],r.accuracyListeners=[],r.searchListeners=[],r.state={team:T.Blue,searchStr:""},r.setTeam=r.setTeam.bind(Object(h.a)(r)),r.addTeamListener=r.addTeamListener.bind(Object(h.a)(r)),r.removeTeamListener=r.removeTeamListener.bind(Object(h.a)(r)),r.setAccuracy=r.setAccuracy.bind(Object(h.a)(r)),r.addAccuracyListener=r.addAccuracyListener.bind(Object(h.a)(r)),r.removeAccuracyListener=r.removeAccuracyListener.bind(Object(h.a)(r)),r.setSearchStr=r.setSearchStr.bind(Object(h.a)(r)),r.searchAction=r.searchAction.bind(Object(h.a)(r)),r.addSearchActionListener=r.addSearchActionListener.bind(Object(h.a)(r)),r.removeSearchActionListener=r.removeSearchActionListener.bind(Object(h.a)(r)),r}return Object(d.a)(n,[{key:"setTeam",value:function(e){var t=this;this.setState({team:e},Object(l.a)(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(t.teamListeners.map((function(t){return t.listener(e)})));case 2:case"end":return n.stop()}}),n)}))))}},{key:"addTeamListener",value:function(e,t){this.teamListeners.filter((function(t){return t.name===e})).length>0||this.teamListeners.push({name:e,listener:t})}},{key:"removeTeamListener",value:function(e){this.teamListeners.filter((function(t){return t.name===e})).length<=0||(this.teamListeners=this.teamListeners.filter((function(t){return t.name!==e})))}},{key:"setAccuracy",value:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.accuracyListeners.map((function(e){return e.listener(t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAccuracyListener",value:function(e,t){this.accuracyListeners.filter((function(t){return t.name===e})).length>0||this.accuracyListeners.push({name:e,listener:t})}},{key:"removeAccuracyListener",value:function(e){this.accuracyListeners.filter((function(t){return t.name===e})).length<=0||(this.accuracyListeners=this.accuracyListeners.filter((function(t){return t.name!==e})))}},{key:"setSearchStr",value:function(e){this.setState({searchStr:e})}},{key:"searchAction",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.searchStr,e.next=3,Promise.all(this.searchListeners.map((function(e){return e.listener(t)})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addSearchActionListener",value:function(e,t){this.searchListeners.filter((function(t){return t.name===e})).length>0||this.searchListeners.push({name:e,listener:t})}},{key:"removeSearchActionListener",value:function(e){this.searchListeners.filter((function(t){return t.name===e})).length<=0||(this.searchListeners=this.searchListeners.filter((function(t){return t.name!==e})))}},{key:"render",value:function(){var e=this.state,t=e.team,n=e.searchStr;return Object(_.jsx)(k.Provider,{value:{team:t,setTeam:this.setTeam,addListener:this.addTeamListener,removeListener:this.removeTeamListener},children:Object(_.jsx)(R.Provider,{value:{setAccuracy:this.setAccuracy,addListener:this.addAccuracyListener,removeListener:this.removeAccuracyListener},children:Object(_.jsx)(w.Provider,{value:{searchStr:n,setSearchStr:this.setSearchStr,searchAction:this.searchAction,addActionListener:this.addSearchActionListener,removeActionListener:this.removeSearchActionListener},children:Object(_.jsxs)("div",{className:"transition-default duration-500 ease-in-out flex flex-col w-screen h-screen ".concat(t===T.Blue?"bg-blue-300":"bg-red-300"),children:[Object(_.jsx)($,{}),Object(_.jsx)(ee,{}),Object(_.jsx)(Q,{})]})})})})}}]),n}(s.a.Component),ne=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).baseUrlListeners=[],r.state={token:"",baseUrl:O.serverBaseUrl,currentTooltip:0,isTooltipEnabled:!0},r.setToken=r.setToken.bind(Object(h.a)(r)),r.loadTokenFromCookie=r.loadTokenFromCookie.bind(Object(h.a)(r)),r.checkTokenValid=r.checkTokenValid.bind(Object(h.a)(r)),r.setBaseUrl=r.setBaseUrl.bind(Object(h.a)(r)),r.addBaseUrlListener=r.addBaseUrlListener.bind(Object(h.a)(r)),r.removeBaseUrlListener=r.removeBaseUrlListener.bind(Object(h.a)(r)),r.setCurrentTooltip=r.setCurrentTooltip.bind(Object(h.a)(r)),r.resetCurrentTooltip=r.resetCurrentTooltip.bind(Object(h.a)(r)),r.setTooltipEnabled=r.setTooltipEnabled.bind(Object(h.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadTokenFromCookie();case 2:t=this.props.cookies,void 0==(n=t.get("isTooltipEnabled"))?t.set("isTooltipEnabled",!0):this.setState({isTooltipEnabled:"true"===n});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setToken",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.cookies,e.next=3,this.checkTokenValid(t);case 3:e.sent?this.setState({token:t},(function(){n.set("token",t),r.resetCurrentTooltip()})):this.setState({token:""},(function(){r.resetCurrentTooltip()}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadTokenFromCookie",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,r,s=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.cookies,n=t.get("token")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.checkTokenValid(n);case 6:r=e.sent,this.setState({token:r?n:""},(function(){s.resetCurrentTooltip()}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkTokenValid",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.baseUrl,e.prev=1,e.next=4,x.a.get("".concat(n,"/auth/token"),{headers:{"X-Access-Tokens":t}});case 4:if(200!==(r=e.sent).status){e.next=7;break}return e.abrupt("return","valid token"===r.data.message);case 7:return e.abrupt("return",!1);case 10:return e.prev=10,e.t0=e.catch(1),alert("".concat(e.t0.response.status,": ").concat(e.t0.response.data)),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setBaseUrl",value:function(e){var t=this;this.setState({baseUrl:e},Object(l.a)(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(t.baseUrlListeners.map((function(t){return t.listener(e)})));case 2:case"end":return n.stop()}}),n)}))))}},{key:"addBaseUrlListener",value:function(e,t){this.baseUrlListeners.filter((function(t){return t.name===e})).length>0||this.baseUrlListeners.push({name:e,listener:t})}},{key:"removeBaseUrlListener",value:function(e){this.baseUrlListeners.filter((function(t){return t.name===e})).length<=0||(this.baseUrlListeners=this.baseUrlListeners.filter((function(t){return t.name!==e})))}},{key:"setCurrentTooltip",value:function(e){this.setState({currentTooltip:e})}},{key:"resetCurrentTooltip",value:function(){this.setCurrentTooltip(0)}},{key:"setTooltipEnabled",value:function(e){var t=this.props.cookies;this.setState({isTooltipEnabled:e},(function(){t.set("isTooltipEnabled",e)}))}},{key:"render",value:function(){var e=this.props.cookies,t=this.state,n=t.token,r=t.baseUrl,s=t.currentTooltip,a=t.isTooltipEnabled;return Object(_.jsx)(C.Provider,{value:{token:n,setToken:this.setToken},children:Object(_.jsx)(E.Provider,{value:{baseUrl:r,setBaseUrl:this.setBaseUrl,addListener:this.addBaseUrlListener,removeListener:this.removeBaseUrlListener},children:Object(_.jsx)(U.Provider,{value:{cookies:e},children:Object(_.jsx)(L.Provider,{value:{currentTooltip:s,isTooltipEnabled:a,setCurrentTooltip:this.setCurrentTooltip,resetCurrentTooltip:this.resetCurrentTooltip,setTooltipEnabled:this.setTooltipEnabled},children:Object(_.jsx)("div",{className:"App",children:!n&&Object(_.jsx)(P,{})||n&&Object(_.jsx)(te,{})})})})})})}}]),n}(s.a.Component),re=Object(m.a)(ne);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=n(111);c.a.render(Object(_.jsx)(s.a.StrictMode,{children:Object(_.jsx)(se.a,{children:Object(_.jsx)(re,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.8ae29caa.chunk.js.map